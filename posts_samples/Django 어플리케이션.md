# Django 어플리케이션

**해당 방법은 윈도우 10을 기준으로 작성하였습니다.**

django는 한 프로젝트를 중심으로 각 기능을 부여할 수 있는 어플리케이션을 생성 및 지정할 수 있다. 작은 프로젝트라면, 하나의 어플리케이션 안에 전부 처리할 수 있지만, 프로젝트가 커질수록 각 기능을 담당하는 어플리케이션으로 분리해 관리할 필요가 있다. 각 어플리케이션에 위치하는 데이터베이스와 처리함수 모두 어플리케이션마다 독립적으로 작동할 수 있어, 해당 기능에 문제가 생겼다면 조치가 더욱 쉬워지게 된다.

이전 포스트에 Django를 설치하는 과정에 이어서 진행하는 것이므로, 이전 과정을 전부 스킵하고 넘기도록 하겠다. 과정을 확인하고 싶으면, 하단 URL로 넘어가도록 하자.

```
URL
```

그렇다면, 우선 간단한 어플리케이션을 생성하는 과정부터 시작하도록 하자.

## 어플리케이션 생성

Django에 어플리케이션 생성은 폴더 안의 manage.py의 명령어로 생성할 수 있다. 서버를 기동했던 명령어와 같이 하단의 명령어만 입력해주면, 쉽게 생성이 가능하다.

```
python manage.py startapp (어플리케이션 이름)
```

이렇게 되면 폴더안에 어플리케이션 이름으로 폴더가 하나 만들어진다. 그와 동시에 여러가지 구성파일이 생성되어지는데 해당 파일구성은 다음과 같다.

## 어플리케이션 구성

```
C:\test_django\test_app.
│  admin.py
│  apps.py
│  models.py
│  tests.py
│  views.py
│  __init__.py
│
└─migrations
        __init__.py
```

파일 구성은 하나하나씩 저마다의 기능이 있으며 하나씩 설명하겠다.

## ```admin.py```
서버의 관리자 사이트안의 어플리케이션 설정에 관한 파일이다. 관리자 사이트 안에서 어플리케이션 모델( 데이터베이스의 테이블 )의 편집 및 관리가 가능하며, 동시에 유저의 모델을 등록한다면 유저의 정보도 입력 및 편집이 가능하다. 더불어 데이터의 열람목록을 커스터마이징 혹은 편집 기능을 커스터마이징 하여 관리자 사이트안에서 관련 어플리케이션의 편집을 좀 더 편의성 있게 할 수 있다.

## ```apps.py```
전체적인 프로젝트 안에 설정(Settings.py)안에 들어가는 기본 어플리케이션의 정보가 들어가있는 파일이다. 어플리케이션 뿐만 아니라 데이터베이스도 포함하여, AppConfig를 통해 하나의 어플리케이션이라는 형태를 만들어주는 파일이기 때문에, 함부로 지워서는 안됀다.

## ```models.py```
어플리케이션안에 사용하는 데이터베이스의 테이블을 생성 및 관리해주는 파일이다. 어플리케이션 안에 필요한 데이터베이스의 데이터를 전부 모델의 필드로 추가하여, 데이터베이스로 보내게 하는 틀을 제작하는 역할을 하게 된다.

## ```tests.py```
어플리케이션 내부 메소드에 가상데이터를 넣어 테스트하기 위한 파일이다. 기본적으로 Django기능 중 테스트에 대한 명령어가 이 파일을 자동으로 실행시키기 때문에, 이 파일 안에 테스트케이스를 생성 및 편집 후 명령어 만으로 테스트가 간편해질 수 있는 파일이다. 테스트에 관련된 내용은 추후 다루도록 하겠다.

## ```views.py```
어플리케이션안에서 서버와 템플렛을 이어주면서, 내부 데이터를 처리하는 역할을 하는 파일이다. 템플릿에서 넘어가는 데이터의 처리 및 기본적인 템플릿에 대한 데이터를 제공하는 기능으로 프로젝트 폴더의 urls.py에 각 views를 대입해 이어주는 방식으로 되어있다.

## ```migrations 폴더```
models.py에서 지정한 모델에서 신규 생성 혹은 변경이 있을 시 추후 나올 makemigrations명령어를 통해 생성되는 마이그레이션 파일들의 경로이다. 모델변경 후 migrate명령어를 사용시 폴더 내 파일명의 숫자 순번대로 migrate가 실행된다.

---

## 어플리케이션 부가 구성

Django의 기본 어플리케이션 구성 이외에도 편의성 있게 관리하는 여러가지 구성들이 있다. 대표적으로는 어플리케이션의 템플릿을 관리하는 templates폴더 혹은 템플릿의 js, css 그외 라이브러리들의 구성을 관리하는 static 폴더 등 여러 구성이 있다.

## ```templates 폴더```
해당 어플리케이션에 사용되는 템플릿들을 모아넣은 폴더이다. views.py와 자동으로 연결되어 있어, view.py에서 직접적으로 사용할 수 있는 유용한 폴더이다. Django에 전달되는 데이터는 html에 jinja2로 전달되어지며, html안의 POST, GET사용시 자동으로 views.py와 연결되도록 하는 폴더이다.

## ```urls.py```
어플리케이션 폴더가 아닌 프로젝트 폴더 내부에 이미 존재하는 파일이지만, 별도의 어플리케이션 URL을 관리하기에 편리한 파일이다. 어플리케이션 내부 urls.py에 views를 지정 후 프로젝트 폴더의 urls.py에는 단지 어플리케이션의 urls.py를 import하기만 하면 된다. 단순한 단일 어플리케이션 프로젝트라면 만들지 않아도 무방하지만, 큰 프로젝트에서 어플리케이션을 분할해서 사용하게 된다면 꼭 필요할 수 있는 파일.

## ```static 폴더```
어플리케이션 내부에 별도로 템플릿의 css, js 혹은 내부 이미지들을 보관하여 바로 사용하는 폴더이다. 템플릿에서 jinja2를 이용한 load static기능을 이용하면 자동으로 static폴더로 이어져 폴더 내부의 파일들을 이용할 수 있게 된다. 그 외에도 라이브러리들을 넣어 cdn을 사용하지 않고 내부 파일에서도 사용하도록 할 수 있는 유용한 폴더이다.

## ```media 폴더```
데이터베이스 필드중 파일형태의 데이터가 존재할 시 그 파일을 보관하는 폴더이다. 데이터의 파일을 안에 넣고 필드에는 자동으로 media폴더로 url이 저장되어, 데이터베이스에 첨부한 파일들을 보관하는 폴더로 이용할 수 있다.