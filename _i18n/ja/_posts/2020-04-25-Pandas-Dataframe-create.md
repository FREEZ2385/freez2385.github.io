---
title: Pandas Dataframeの作成と利用
date: 2020-04-25 13:30:00 +0900
categories: [Development, Python, Pandas]
tags: [Dataframe]
seo:
  date_modified: 2020-09-23 21:43:04 +0900
---

# Pandas Dataframe の作成と利用

## **データフレームの作成**

データフレームを追加する際には Dict 形式で Key には行の名前を入力 Value に各行別データを列順に入れなければならない。

```python

import pandas as pd

data_a = ['1','2','3','4'] # aという行のデータ列順別リスト
data_b = ['5','6','7','8'] # bという行のデータ列順別リスト

df = pd.DataFrame({'a': data_a, 'b': data_b})

```

|     |  a  |  b  |
| --- | :-: | :-: |
| 0   |  1  |  5  |
| 1   |  2  |  6  |
| 2   |  3  |  7  |
| 3   |  4  |  8  |

## **データフレームの行ラベル変更**

> ### 基本データーフレーム

|     |  a  |  b  |
| --- | :-: | :-: |
| 0   |  1  |  5  |
| 1   |  2  |  6  |
| 2   |  3  |  7  |
| 3   |  4  |  8  |

```python

df.rename(columns={'a':'renamed_a', 'b': 'renamed_b' })

```

|     | renamed_a | renamed_b |
| --- | --------: | --------: |
| 0   |         1 |         5 |
| 1   |         2 |         6 |
| 2   |         3 |         7 |
| 3   |         4 |         8 |

---

## **データフレームの接近**

> ### 基本データーフレーム

|     |  a  |  b  |
| --- | :-: | :-: |
| 0   |  1  |  5  |
| 1   |  2  |  6  |
| 2   |  3  |  7  |
| 3   |  4  |  8  |

### 行のラベルを抽出する方法

```python

df.columns

list(df.columns)

```

Index(['a', 'b'], dtype='object')

['a', 'b']

### 任意に行順を変える方法

```python

df = df[['b','a']] # 当該行のリストに読み込むため、行を除外することもできる。

```

|     |  b  |   a |
| --- | :-: | --: |
| 0   |  5  |   1 |
| 1   |  6  |   2 |
| 2   |  7  |   3 |
| 3   |  8  |   4 |

### 特定例または行を洗濯

```python

df.loc[0] # 特定行の選択

df.iloc[0]

```

|     |  a  |   b |
| --- | :-: | --: |
| 0   |  1  |   5 |

```python

df["a"] # 特定列の選択

```

|     |     |
| --- | :-: |
| 0   |  1  |
| 1   |  2  |
| 2   |  3  |
| 3   |  4  |

```python

df["a"][0] # 特定行の中に特定列を選択

```

1

### Index の設定 (基本 Index は 0 から自動で追加される)

```python

df.set_index("b")

```

| b   |  a  |
| --- | :-: |
| 5   |  1  |
| 6   |  2  |
| 7   |  3  |
| 8   |  4  |

---

## データフレームの追加・修正・削除

> ### 基本データフレーム

|     |  a  |  b  |
| --- | :-: | :-: |
| 0   |  1  |  5  |
| 1   |  2  |  6  |
| 2   |  3  |  7  |
| 3   |  4  |  8  |

### **データフレームの追加**

index を新しく追加して、データフレームに追加

```python

df.loc[4] = ['9','10'] # 重複されないindexを追加したい時（重複すると該当するすべてのIndexが重畳されて修正されます。）

```

|     |  a  |   b |
| --- | :-: | --: |
| 0   |  1  |   5 |
| 1   |  2  |   6 |
| 2   |  3  |   7 |
| 3   |  4  |   8 |
| 4   |  9  |  10 |

新しいデータフレームを作成し、データフレームの中に追加

```python

new_data = pd.DataFrame({'a': ['11'], 'b': ['12']}) # Index順を無視して新しいデータフレームを作成し、追加する時

df.append(new_data)

```

|     |  a  |   b |
| --- | :-: | --: |
| 0   |  1  |   5 |
| 1   |  2  |   6 |
| 2   |  3  |   7 |
| 3   |  4  |   8 |
| 0   | 11  |  12 |

---

## データフレームの検索・絞り込み

> ### 基本データフレーム

|     |  a  |  b  |
| --- | :-: | :-: |
| 0   |  1  |  5  |
| 1   |  2  |  6  |
| 2   |  3  |  7  |
| 3   |  4  |  8  |
| 4   |  4  |  9  |

### データフレームの列による行の絞り込み

```python

df[
  df['a'] == '4' # aが４のすべての行を探す
]

```

|     |  a  |   b |
| --- | :-: | --: |
| 3   |  4  |   8 |
| 4   |  4  |   9 |

---
